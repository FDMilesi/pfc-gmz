<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.EditTratamientoTitle}"></h:outputText>
        </ui:define>

        <ui:define name="body">
            <h:form>
                <p:breadCrumb>
                    <p:menuitem value="Home" url="../agenda/Agenda.xhtml" />
                    <p:menuitem value="Pacientes" url="../paciente/List.xhtml"  />
                    <p:menuitem value="Tratamientos de #{editTratamientoController.selected.paciente.toString()}" 
                                url="../tratamiento/List.xhtml?paciente=#{editTratamientoController.selected.paciente.id}"/>
                    <p:menuitem value="Editar tratamiento" disabled="true"/>
                </p:breadCrumb>
            </h:form>
            <h:form id="TratamientoEditForm">
                <p:panel header="#{bundle.EditTratamientoTitle}">
                    <h:panelGroup id="display">
                        <p:panelGrid columns="6" rendered="#{!empty editTratamientoController.selected}">
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_tipoDeTratamiento}" />
                            <p:outputLabel value="#{editTratamientoController.selected.tipoDeTratamiento.toString()}" />
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_cantidadDeSesiones}" for="cantidadDeSesiones" />
                            <p:inputText id="cantidadDeSesiones" 
                                         validatorMessage="#{bundle.CreateTratamientoRangoCantidadDeSesiones}" 
                                         value="#{editTratamientoController.selected.cantidadDeSesiones}" 
                                         title="#{bundle.EditTratamientoTitle_cantidadDeSesiones}" 
                                         required="true" 
                                         requiredMessage="#{bundle.EditTratamientoRequiredMessage_cantidadDeSesiones}"
                                         validator="#{editTratamientoController.validarCantidadDeSesiones}" />
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_finalizado}" for="finalizado" />
                            <p:selectBooleanCheckbox id="finalizado" value="#{editTratamientoController.selected.finalizado}" />
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_particular}" for="particular" />
                            <p:selectOneRadio 
                                disabled="true"
                                id="particular" 
                                value="#{editTratamientoController.selected.particular}" 
                                required="true" 
                                requiredMessage="#{bundle.EditTratamientoRequiredMessage_particular}">
                                <f:selectItem itemLabel="#{bundle.CreateTratamientoLabel_particular_radio}" itemValue="#{true}" />
                                <f:selectItem itemLabel="#{bundle.CreateTratamientoLabel_obraSocial_radio}" itemValue="#{false}" />
                            </p:selectOneRadio>
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_diagnostico}" for="diagnostico" />
                            <p:inputText id="diagnostico" value="#{editTratamientoController.selected.diagnostico}" title="#{bundle.EditTratamientoTitle_diagnostico}" />
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_observaciones}" for="observaciones" />
                            <p:inputTextarea cols="22" rows="4" id="observaciones" value="#{editTratamientoController.selected.observaciones}" title="#{bundle.EditTratamientoTitle_observaciones}" />
                            <p:outputLabel value="#{bundle.EditTratamientoLabel_medicoDerivante}" for="medicoderivante" />
                            <p:inputText id="medicoderivante" value="#{editTratamientoController.selected.medicoDerivante}" title="#{bundle.EditTratamientoTitle_diagnostico}" />
                        </p:panelGrid>
                        <p:commandButton actionListener="#{editTratamientoController.update}"
                                         value="#{bundle.Save}" 
                                         update="display,:growl" 
                                         disabled="#{empty editTratamientoController.selected}">
                            <f:setPropertyActionListener target="#{ordenMedicaController.tratamiento}" value="#{editTratamientoController.selected}" />
                            <f:setPropertyActionListener target="#{sesionController.tratamientoEnEdicion}" value="#{editTratamientoController.selected}" />
                        </p:commandButton>
                        <p:button outcome="/protected/tratamiento/List.xhtml?paciente=#{editTratamientoController.selected.paciente.id}" value="#{bundle.Cancel}" disabled="#{empty editTratamientoController.selected}"/>
                    </h:panelGroup>
                </p:panel>  
            </h:form>
            <ui:include src="ordenMedica/ListOrdenesTratamiento.xhtml" />
            <ui:include src="sesion/ListeSesionesTratamiento.xhtml" />
            <ui:include src="ordenMedica/CreateOrdenMedica.xhtml" />
            <ui:include src="ordenMedica/AutorizarFromTratamiento.xhtml"/>
            <ui:include src="sesion/CreateSesionFromTratamiento.xhtml"/>
            <ui:include src="sesion/EditSesionFromTratamiento.xhtml"/>
        </ui:define>
    </ui:composition>
</html>
